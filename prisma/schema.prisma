generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id_admin     Int     @id @default(autoincrement())
  nombre       String
  correo       String  @unique
  contrasena   String
  areaAdmin    String?
  esSuperadmin Boolean @default(false)
  citas        Cita[]
}

model Visitante {
  id_visitante  Int            @id @default(autoincrement())
  nombre        String
  genero        String
  fechaNac      DateTime
  ine           String
  correo        String
  celular       String
  cita          Cita[]
  medioIngresos MedioIngreso[]
}

model MedioIngreso {
  id_ingreso    Int          @id @default(autoincrement())
  visitanteid   Int
  forma_ingreso FormaIngreso
  visitante     Visitante    @relation(fields: [visitanteid], references: [id_visitante], onDelete: Cascade)
  vehiculo      Vehiculo?
}

model Vehiculo {
  id_vehiculo Int          @id @default(autoincrement())
  marca       String
  modelo      String
  color       String       @default("N/A")
  placas      String       @default("N/A")
  id_ingreso  Int          @unique
  ingreso     MedioIngreso @relation(fields: [id_ingreso], references: [id_ingreso], onDelete: Cascade)
}

model Cita {
  id_cita         Int       @id @default(autoincrement())
  estado          Estado    @default(Actual)
  fecha           DateTime
  area            String?
  personaVisitada String?
  adminId         Int
  visitanteId     Int
  admin           Admin     @relation(fields: [adminId], references: [id_admin])
  visitante       Visitante @relation(fields: [visitanteId], references: [id_visitante], onDelete: Cascade)
}

enum FormaIngreso {
  PIE
  CARRO
}

enum Estado {
  Actual
  Expirado
}
